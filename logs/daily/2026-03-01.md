# Daily Log — 2026-03-01

**Project:** Rijksuitgaven.nl SaaS Migration
**Phase:** V2.0 Development
**Sprint:** Week 10 — Pre-Launch Polish & M1.0 Launch Gate
**Session Duration:** ~1.5h (1 session)

---

## Summary

Roadmap page redesign — Linear-grade initiative stack replacing the flat version cards + feature table. Brainstormed 3 layout approaches (Initiative Stack, Timeline Lanes, Kanban Board), chose Initiative Stack with hybrid rows and expand-to-features. Complete rewrite of both parser (route.ts) and UI (page.tsx). Parser now builds hierarchical data: initiative parents from `## VX -` headers with objectives from "Core promise" / "New use case" lines, all `### VX.Y` as children. UI features collapsible initiative cards with left border accent, objective text, progress bars, sub-release rows with expand-to-features, amber "Doel nog niet helder" banner for unclear objectives, and muted backlog section per track. Bug fix #1: V3.0+ versions were hidden because `.0` was treated as parent card — fixed by creating initiative-level parents (V2, V3, V4...) for V-track while keeping `.0`-as-parent for A/M/D tracks. Bug fix #2: A1.0/M1.0/D1.0 parent features hidden when children exist — fixed by rendering parent's own features as SubReleaseRow before children.

---

## Work Completed

1. **Roadmap page redesign (A1.0 admin feature)** — Complete rewrite of `/team/roadmap` to Linear-grade initiative stack:
   - **Parser (route.ts):** Hierarchical data model — initiative parents from `## VX - Name` headers, objectives from "Core promise" + "New use case", all `### VX.Y` as children. V-track uses initiative-level parents (V2, V3...), A/M/D tracks keep `.0` as parent. Aggregated progress from children. Backlog items separated from release features.
   - **UI (page.tsx):** InitiativeCard (collapsible panels with left border accent, objective, progress bar, status badge), SubReleaseRow (compact rows with status dot, mini progress, expand-to-features), FeatureRow (status dot, UX-ID, title), BacklogSection (muted dashed border, separated divider). Track summary bar with counts. Auto-expand live/building releases.
   - **Design decisions:** Prominent amber banner for unclear objectives ("Doel nog niet helder"), features only inside versions (no flat table), backlog section per track after releases.

2. **Bug fix: V3.0+ missing from roadmap** — `isMajorVersion("V3.0")` returned true, making V3.0 the parent card and hiding its features when V3.1 existed as child. Fixed by creating initiative-level parents from `## VX -` section headers. Now V3.0 and V3.1 both show as sub-releases under "V3 Rijksuitgaven Reporter".

3. **Bug fix: A1.0/M1.0/D1.0 features not showing** — Same class of bug: when a parent release (e.g. A1.0) had both own features AND children (A1.1, A1.2), only children were shown. The `release.children.length === 0` condition in InitiativeCard hid the parent's own features. Fixed by rendering the parent as the first SubReleaseRow before its children when both features and children exist.

---

## Files Created

| File | Description |
|------|-------------|

## Files Modified

| File | Changes |
|------|---------|
| `app/src/app/api/v1/team/roadmap/route.ts` | Complete rewrite: hierarchical data model, initiative parents from ## headers, objective extraction, V-track initiative-level parents, aggregated progress, backlog separation |
| `app/src/app/team/roadmap/page.tsx` | Complete rewrite: InitiativeCard, SubReleaseRow, FeatureRow, BacklogSection, track summary bar, auto-expand, amber objective warning |

---

## Issues Resolved

| Issue | Solution |
|-------|----------|
| Roadmap page generic card grid, not Linear-grade | Complete redesign as initiative stack with hierarchy, objectives, progress |
| V3.0, V4.0 etc. missing as sub-releases | V-track now uses initiative-level parents (V2, V3) from ## headers; all ### VX.Y are children |
| No objectives/goals visible on roadmap | Parser extracts "Core promise" + "New use case" from VERSIONING.md |
| No visual indicator for unclear objectives | Prominent amber banner: "Doel nog niet helder" |
| Backlog items mixed with release features | Separate backlog section per track with muted styling |
| A1.0/M1.0/D1.0 features hidden when children exist | Parent rendered as first SubReleaseRow before children |

---

## Next Steps

- M1.0 Launch Gate items (SEO, DNS plan, rate limiting, user migration, homepage copy, logo)
- V2.4 Vergelijk & URL State — merge from feature branch when ready
- Homepage copy optimization (remaining value props)

---

**Session Status:** Complete
