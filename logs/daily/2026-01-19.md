# Daily Log - 2026-01-19

**Project:** Rijksuitgaven.nl SaaS Migration
**Phase:** Requirements & Architecture
**Session Duration:** Full session

---

## Summary

Completed V1.0 MVP scope decisions, conducted V2.0 Research Mode brainstorm based on Eerste Kamer user interview, and updated architecture documentation. Major outcome: "Bloomberg Terminal for Rijksfinanciën" vision with IBOS domain-first analysis.

---

## Tasks Completed

### 1. V1.0 Critical Decisions (4 of 4) ✅

**DECISION 1: V1.0 Timeline**
- V1.0 = Search Bar only (8 weeks)
- V2.0 = Research Mode (+12 weeks later)

**DECISION 2: Pricing Strategy**
- €150/month or €1,500/year (ex VAT)
- Research tier pricing TBD at V2.0 launch

**DECISION 3: V1.0 MVP Scope**
- Must-haves: Search bar, autocomplete, cross-module search, all 7 module filters, year/amount filters, CSV export (500 rows), email/password auth
- Never: Social login, unlimited exports

**DECISION 4: User Migration**
- 1:1 migration to new platform
- Research Mode as future upsell

### 2. V2.0 Research Mode Brainstorm ✅

Conducted brainstorm session using `/brainstorm-mode` skill based on Eerste Kamer user interview.

**Key Insights:**
- Entry point shifts from Recipient → Policy Domain
- "Where does the tax euro go?" as primary question
- IBOS classification (30 official Dutch policy domains)
- Bloomberg Terminal positioning

**V2.0 Features Defined:**
- Domain-first analysis (IBOS)
- User-selectable focus domains
- AI-assisted recipient classification
- Advanced visualizations (Sankey, Treemap, Heatmap)
- wetten.overheid.nl integration (must-have)
- Trend analysis, comparisons, top N queries
- Save queries, share read-only links
- Export: CSV, Excel, PDF reports

### 3. New ADRs Documented (5 new) ✅

- **ADR-008:** IBOS Domain Classification
- **ADR-009:** Entry Point Paradigm (Domain-first)
- **ADR-010:** wetten.overheid.nl Integration (must-have)
- **ADR-011:** Advanced Visualizations
- **ADR-012:** V3.0 Data Requirement (begroting needed)

### 4. Architecture Updates ✅

Updated RECOMMENDED-TECH-STACK.md with V2.0 additions:
- Frontend: Added Recharts + nivo (Sankey diagrams)
- Backend: Added WeasyPrint (PDF), BeautifulSoup4 (web scraping)
- Database: Added IBOS domain tables schema
- MCP Tools: Added 7 new domain-related tools
- AI: Confirmed Claude primary strategy

### 5. Custom Commands Created ✅

- `/startday` - Session briefing
- `/brainstorm-mode` - Ideas → designs
- `/adr` - Architecture Decision Records
- `/wireframe` - UI screen descriptions

### 6. Project Rules Added to CLAUDE.md ✅

- Budget: €180/month max
- Export: 500 rows always
- Auth: Email/password only
- Timeline: V1.0 (8 weeks), V2.0 (+12 weeks)

---

## Files Created Today

| File | Lines | Description |
|------|-------|-------------|
| `docs/plans/2026-01-19-v2-research-mode-design.md` | ~300 | V2.0 Research Mode full design |
| `02-requirements/ibos-classification.md` | ~100 | IBOS domain reference (30 domains) |
| `.claude/commands/startday.md` | ~50 | Start of day briefing command |
| `.claude/commands/brainstorm-mode.md` | ~80 | Brainstorming skill |
| `.claude/commands/adr.md` | ~100 | ADR creation command |
| `.claude/commands/wireframe.md` | ~150 | Wireframe description command |
| `logs/daily/2026-01-19.md` | ~250 | This file |

**Total new files:** 7

---

## Files Modified Today

| File | Changes |
|------|---------|
| `logs/SESSION-CONTEXT.md` | Updated with V1.0 decisions, V2.0 scope, new ADRs |
| `02-requirements/search-requirements.md` | Updated Bloomberg vision, pricing, export limits |
| `04-target-architecture/RECOMMENDED-TECH-STACK.md` | Added V2.0 libraries, MCP tools, database schema |
| `CLAUDE.md` | Added project rules, commands table |

**Total modified files:** 4

---

## Key Decisions Made

### Product Decisions

| Decision | Outcome |
|----------|---------|
| V1.0 Timeline | 8 weeks (Search Bar only) |
| V2.0 Timeline | +12 weeks (Research Mode) |
| Pricing V1.0 | €150/month or €1,500/year |
| Export limit | 500 rows (always) |
| Auth | Email/password only (never social) |
| Migration | 1:1, Research Mode as upsell |

### V2.0 Vision Decisions

| Decision | Outcome |
|----------|---------|
| Product positioning | "Bloomberg Terminal for Rijksfinanciën" |
| Entry point | Domain-first (not recipient-first) |
| Domain classification | IBOS (30 official domains) |
| wetten.overheid.nl | Must-have integration |
| Visualizations | Standard + Sankey, Treemap, Heatmap |
| Workspace | Save queries, share read-only, export PDF |

### Architecture Decisions

| Decision | Outcome |
|----------|---------|
| Frontend charts | Recharts + nivo |
| PDF generation | WeasyPrint (Python) |
| Domain tables | 4 new tables (IBOS, mappings, user prefs, analytics) |
| MCP tools | 7 new domain-related tools |

---

## Discussions & Clarifications

### Eerste Kamer User Interview Insights

Key requirements from user research:
1. **Comptabiliteitswet** - Track under-spending, cash shifts (V3.0 - needs begroting)
2. **Domain analysis** - "Where does tax euro go?" percentage breakdowns
3. **IBOS classification** - Use official 30 policy domains
4. **Trend analysis** - Multi-year comparisons, growth/decline
5. **Duyserberg method** - Map expenses to domains
6. **wetten.overheid.nl** - Legal basis for Regelingen

### User Decisions During Session

- Social login: "No social logins ever!" → Removed from requirements
- Unlimited exports: Removed from requirements (500 row limit always)
- Research tier pricing: Decide at V2.0 launch
- V3.0 (budget analysis): Parked - requires begroting data

---

## Metrics

### Session
- **Duration:** Full session
- **Decisions made:** 10+
- **ADRs created:** 5 new (ADR-008 to ADR-012)
- **Commands created:** 4

### Documentation
- **New files:** 7
- **Modified files:** 4
- **Total lines written:** ~1,000+

---

## Blockers

**None.** All V1.0 decisions made. Ready for wireframes.

---

## Next Steps (Priority Order)

1. **UI/UX Wireframes (V1.0)**
   - Search bar with autocomplete
   - Filter panel (collapsible)
   - Results table
   - Module navigation

2. **API Specifications**
   - Search API endpoints
   - Authentication endpoints
   - Export endpoints

3. **Development Setup**
   - Railway account
   - GitHub repository
   - Local environment

---

## Notes for Next Session

### Ready to Start
- Wireframes for V1.0 search interface
- Use `/wireframe` command for structured descriptions

### Context to Remember
- V1.0 is migration only (no new features beyond current)
- V2.0 is the "Bloomberg Terminal" with AI
- Export limit: 500 rows (not 10K)
- No social login ever

### Key Files to Reference
- `docs/plans/2026-01-19-v2-research-mode-design.md` - V2.0 design
- `02-requirements/ibos-classification.md` - IBOS domains
- `logs/SESSION-CONTEXT.md` - Current state

---

## Version Roadmap (Confirmed)

| Version | Focus | Timeline | Data |
|---------|-------|----------|------|
| V1.0 | Search migration | 8 weeks | Realisatie |
| V2.0 | Research Mode + IBOS | +12 weeks | Realisatie |
| V2.1 | PowerPoint, collaboration | +8 weeks | Realisatie |
| V3.0 | Budget analysis | TBD | + Begroting |

---

**Session End Time:** 2026-01-19
**Status:** V1.0 scope complete, V2.0 design complete, ready for wireframes
**Confidence:** High - all decisions made, clear vision
**Risk Level:** Low - no blockers, architecture validated
